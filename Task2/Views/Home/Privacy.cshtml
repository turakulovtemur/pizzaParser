
<div>
    <input type="text" id="searchText" />
    <input type="button" onclick="search()" value="поиск" />
    <a></a>
</div>
<div class="flex">
</div>
<script>
    function buildPage(data) {
        $(data).each(function () {
            $(".flex").append(`<div class="flex-item" data-id="${this.id}" onclick="detail(this)">` +
                '<div class="product_img"><img class="img_photo" src=' + this.photo + '>' + '</div>' +
                `<div class="product_name"><a href="/home/details/${this.id}">` + this.name + '</a></div>' +
                '<div class="product-text">' + this.desc + '</div>' +
                '<div class="pizza-size"><div class="product-item">' + this.size1 + '</div><div class="product-item active">' + this.size2 + '</div><div class="product-item">' + this.size3 + '</div></div>' +
                '<div class="product_price_btn"><div class="product_price">' + this.price + '<span>&#8381</span></div>' +
                '<div class="product_weight">' + this.weight + '</div>' +
                '<div class="product_half">1/2</div>' +
                '<div class="product_btn">В корзину</div></div></div>')
        });
    }

    function detail(el) {
        var id = $(el).data("id");
        console.log(id);
        $('.flex-item').click(function () {
            window.location.href = '/home/details/'+id;
        })
    }
    

    $(document).ready(function () {
        $.get("/home/get-all-pizza", function (data) {
        })
            .done(function (data) {
                buildPage(data);
            })
            .fail(function (error) {
            });
    });

    function search() {
        $.ajax({
            url: '/home/search',
            type: 'POST',
            data: JSON.stringify({ name: $("#searchText").val() }),
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            async: false,
            success: function (data) {
                $(".flex").empty();
                buildPage(data);
            }
        });
    }



</script>